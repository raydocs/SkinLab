# fn-12-z04.3 关键用户行为追踪

## Description
定义并实现关键用户行为事件追踪。

**目标**:
1. 定义标准事件名称
2. 在关键节点埋点
3. 携带必要参数
4. 验证事件上报

## Key Files
- `/SkinLab/Services/AnalyticsEvents.swift` - 事件定义
- 各功能模块的View和Service文件

## Event Definitions
```swift
enum AnalyticsEvent: String {
    // 用户生命周期
    case userSignUp = "user_sign_up"
    case userLogin = "user_login"
    case profileCompleted = "profile_completed"

    // 核心功能
    case analysisStarted = "analysis_started"
    case analysisCompleted = "analysis_completed"
    case checkInCompleted = "check_in_completed"

    // 功能使用
    case productAdded = "product_added"
    case productScanned = "product_scanned"
    case reportViewed = "report_viewed"
    case scenarioSelected = "scenario_selected"
    case weatherViewed = "weather_viewed"
    case predictionViewed = "prediction_viewed"

    // 参与度
    case streakMilestone = "streak_milestone"
    case badgeEarned = "badge_earned"
    case freezeUsed = "freeze_used"
}

// 使用示例
AnalyticsEvents.log(.analysisCompleted, parameters: [
    "skin_type": skinType.rawValue,
    "score": score,
    "duration_seconds": duration
])
```

## Implementation Notes
在以下位置添加埋点：
- `AnalysisView` - 分析开始/完成
- `TrackingView` - 打卡完成
- `ProductListView` - 产品添加
- `HomeView` - 报告查看
- `ScenarioSelectionView` - 场景选择
- `StreakTrackingService` - 连续打卡里程碑

## Acceptance
- [ ] 事件枚举定义完整
- [ ] 核心流程埋点完成
- [ ] 事件参数规范化
- [ ] DEBUG模式可验证
- [ ] 无性能影响（异步上报）

## Quick Commands
```bash
xcodebuild build -scheme SkinLab -destination 'platform=iOS Simulator,name=iPhone 17'
```

## Done summary
Implemented key user behavior event tracking with standardized analytics events for analysis, check-ins, products, scenarios, streaks, and achievements. Events use consistent snake_case naming with appropriate parameters for data analysis.
## Evidence
- Commits: 2515aaa, 62611a8
- Tests: xcodebuild build -scheme SkinLab
- PRs: